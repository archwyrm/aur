# Contributor: Markus Martin <markus@archwyrm.net>
pkgname=alure
pkgver=1.0
pkgrel=4
pkgdesc="Utility library to help manage common tasks with OpenAL applications."
arch=('i686' 'x86_64')
url="http://kcat.strangesoft.net/alure.html"
license=('LGPL')
depends=('openal')
makedepends=('cmake')
optdepends=('sndfile: Uncompressed audio support'
            'vorbisfile: OGG Vorbis support'
            'flac: FLAC support')
source=(http://kcat.strangesoft.net/alure-releases/alure-1.0-src.tar.bz2
    x86_64-support.diff
    gcc4.5-support.diff)
md5sums=('48a81287f2caf2adc5870cd075e70c9c'
         '00fa21827738b5d9a45644e295c62d5f'
         '1391f452f94ca261ac9883a1065774d3')

build() {
  cd $startdir/src/$pkgname-$pkgver

  patch -p0 < $startdir/x86_64-support.diff || return 1
  patch -p0 < $startdir/gcc4.5-support.diff || return 1

  cmake . -DCMAKE_INSTALL_PREFIX=/usr || return 1
  make || return 1
  make DESTDIR=$startdir/pkg install || return 1
}
